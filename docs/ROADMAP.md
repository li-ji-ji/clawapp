# ClawApp 功能路线图

> 基于 OpenClaw Gateway 源码分析，整理出所有可接入但尚未实现的功能。
> 按优先级分阶段推进，每个功能开发前先规划，开发后老板确认，确认后推送 Git。

---

## 当前已实现 ✅

| 功能 | API | 说明 |
|------|-----|------|
| 流式聊天 | `chat.send` | 打字机效果，Markdown 渲染 + 代码高亮 |
| 聊天历史 | `chat.history` | 加载历史消息 |
| 中止生成 | `chat.abort` | 停止 AI 回复 |
| 会话列表 | `sessions.list` | 切换、新建、删除会话 |
| 会话删除 | `sessions.delete` | 删除指定会话 |
| 会话重置 | `sessions.reset` | 清空会话历史 |
| 图片发送 | 附件上传 | 拍照/相册选取 |
| 快捷指令 | 前端实现 | /model、/think、/new 等 |
| 主题切换 | 前端实现 | 亮色/暗色/跟随系统 |
| 中英文 i18n | 前端实现 | 自动检测浏览器语言 |
| 自动重连 | 前端实现 | 断连自动重试 + 手动重连按钮 |
| 认证错误提示 | 前端实现 | Token 错误时明确提示 |
| PWA | Service Worker | 添加到主屏幕 |
| 消息队列 | 前端实现 | 发送中新消息自动排队 |

---

## Phase 1 — 体验打磨（简单，优先做）

| # | 功能 | 难度 | 说明 |
|---|------|------|------|
| 1.1 | 消息长按菜单 | ⭐ | 复制文本、复制代码块 |
| 1.2 | 代码块复制按钮 | ⭐ | 每个代码块右上角一键复制 |
| 1.3 | 图片大图预览 | ⭐ | 点击图片全屏查看，支持手势缩放 |
| 1.4 | 打字机光标 | ⭐ | 流式输出时末尾闪烁光标 |
| 1.5 | 消息时间戳 | ⭐ | 显示每条消息的发送时间 |
| 1.6 | 滚动到底部按钮 | ⭐ | 滚动上去后显示"↓ 回到底部" |
| 1.7 | 输入框自适应高度 | ⭐ | 多行输入时自动撑高（已有，确认是否正常） |

---

## Phase 2 — 核心功能（中等难度）

| # | 功能 | 难度 | Gateway API | 说明 |
|---|------|------|-------------|------|
| 2.1 | 语音输出 | ⭐⭐ | `tts.convert` | AI 消息旁加 🔊 按钮，点击播放语音 |
| 2.2 | 语音输入 | ⭐⭐ | Web Speech API | 🎤 按钮，浏览器语音转文字填入输入框 |
| 2.3 | 用量统计 | ⭐⭐ | `sessions.usage` | 显示 Token 消耗、费用 |
| 2.4 | 工具调用详情 | ⭐⭐ | `tool.*` 事件 | 展开显示 AI 调用了什么工具、输入输出 |
| 2.5 | Thinking 展示 | ⭐⭐ | `chat` delta thinking | 折叠显示 AI 思考过程 |
| 2.6 | 文件上传 | ⭐⭐ | 附件扩展 | 支持 PDF、代码文件等非图片附件 |
| 2.7 | 消息搜索 | ⭐⭐ | 前端实现 | 搜索历史消息关键词 |

---

## Phase 3 — 高级功能（较复杂）

| # | 功能 | 难度 | Gateway API | 说明 |
|---|------|------|-------------|------|
| 3.1 | 流式语音合成 | ⭐⭐⭐ | `tts.convert` | 按句分段合成，边生成边播放 |
| 3.2 | 定时提醒 | ⭐⭐⭐ | `reminders.add/list` | 设置提醒，到时推送通知 |
| 3.3 | Cron 定时任务 | ⭐⭐⭐ | `cron.add/list/remove` | 管理定时任务 |
| 3.4 | Skills 管理 | ⭐⭐⭐ | `skills.status/update` | 查看和更新 AI 技能 |
| 3.5 | 多 Gateway 管理 | ⭐⭐⭐ | 前端实现 | 一个 App 连多个 OpenClaw 实例 |
| 3.6 | 对话导出 | ⭐⭐ | 前端实现 | 导出为 Markdown / PDF |
| 3.7 | Web Push 通知 | ⭐⭐⭐ | `system.notify` | AI 主动推送消息到手机 |

---

## Phase 4 — 进阶能力（按需）

| # | 功能 | 难度 | Gateway API | 说明 |
|---|------|------|-------------|------|
| 4.1 | 插件管理 | ⭐⭐⭐ | `plugins.*` | 启用/禁用插件 |
| 4.2 | Agent 管理 | ⭐⭐⭐ | `agents.*` | 查看/编辑 Agent 配置 |
| 4.3 | 配置管理 | ⭐⭐ | `config.get/set` | 修改 Gateway 配置 |
| 4.4 | 命令执行 | ⭐⭐ | `commands.bash` | 远程执行命令（需安全控制） |
| 4.5 | 联系人管理 | ⭐⭐ | `contacts.*` | 管理 AI 联系人 |
| 4.6 | 设备配对 | ⭐⭐⭐ | `device.pair.*` | 配对新设备 |

---

## 技术债务

| 项目 | 说明 |
|------|------|
| HTTPS/WSS | 外网访问需要加密，考虑 Let's Encrypt 或 Cloudflare |
| 虚拟滚动 | 消息多了会卡，需要虚拟列表优化 |
| 图片懒加载 | 历史消息中的图片应该懒加载 |
| 端到端加密 | 消息加密传输（长期目标） |
| 单元测试 | 核心模块需要测试覆盖 |

---

## 开发流程

1. 从路线图选一个功能
2. 先规划方案，确认可行性
3. 开发实现
4. 老板测试确认效果
5. 确认没问题 → `git commit` + `git push`
6. 打 tag 发版本 → GitHub Actions 自动构建

---

_最后更新：2026-02-17_
